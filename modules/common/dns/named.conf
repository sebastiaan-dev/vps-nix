acl internal {
    10.10.0.0/24;
    10.10.1.0/24;
    // Tailscale IP range
    100.0.0.0/8;
};

options {
    directory "/var/cache/named";

    // Listen only on localhost for security.
    listen-on port 5353 { 127.0.0.1; };
    listen-on-v6 port 5353 { ::1; };

    // Enable recursion so that BIND can look up external domains
    recursion yes;
    allow-query { internal; };

    // Use Quad9 with DNS over TLS.
    forwarders {
        tls://dns.quad9.net;
    };
    forward only;

    dnssec-validation auto;

    // Define any ACLs or zone transfer restrictions as needed.
    allow-transfer { none; };

    minimal-responses yes;
    version "not disclosed";
};

zone "lab" {
    type master;
    file "./zones/db.lab";
};